(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b35c90ec"],{"0366":function(t,e,n){var o=n("1c0b");t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},"159b":function(t,e,n){var o=n("da84"),r=n("fdbc"),c=n("17c2"),i=n("9112");for(var s in r){var a=o[s],u=a&&a.prototype;if(u&&u.forEach!==c)try{i(u,"forEach",c)}catch(l){u.forEach=c}}},"17c2":function(t,e,n){"use strict";var o=n("b727").forEach,r=n("a640"),c=n("ae40"),i=r("forEach"),s=c("forEach");t.exports=i&&s?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,n){"use strict";var o=n("23e7"),r=n("17c2");o({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"60c3":function(t,e,n){},6427:function(t,e,n){"use strict";n("60c3")},a640:function(t,e,n){"use strict";var o=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,n){var o=n("83ab"),r=n("d039"),c=n("5135"),i=Object.defineProperty,s={},a=function(t){throw t};t.exports=function(t,e){if(c(s,t))return s[t];e||(e={});var n=[][t],u=!!c(e,"ACCESSORS")&&e.ACCESSORS,l=c(e,0)?e[0]:a,f=c(e,1)?e[1]:void 0;return s[t]=!!n&&!r((function(){if(u&&!o)return!0;var t={length:-1};u?i(t,1,{enumerable:!0,get:a}):t[1]=1,n.call(t,l,f)}))}},b727:function(t,e,n){var o=n("0366"),r=n("44ad"),c=n("7b0b"),i=n("50c4"),s=n("65f0"),a=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,f=6==t,h=7==t,p=5==t||f;return function(d,m,g,v){for(var L,b,S=c(d),y=r(S),C=o(m,g,3),F=i(y.length),k=0,w=v||s,x=e?w(d,F):n||h?w(d,0):void 0;F>k;k++)if((p||k in y)&&(L=y[k],b=C(L,k,S),t))if(e)x[k]=b;else if(b)switch(t){case 3:return!0;case 5:return L;case 6:return k;case 2:a.call(x,L)}else switch(t){case 4:return!1;case 7:a.call(x,L)}return f?-1:u||l?l:x}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},c24f:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return i}));n("99af");var o=n("bb36");function r(t){return Object(o["a"])({url:"/user",method:"get",headers:{Authorization:"token ".concat(t)}})}function c(t){return Object(o["a"])({url:"/users/".concat(t,"/repos"),method:"get"})}function i(t,e){return Object(o["a"])({url:"/repos/".concat(t,"/").concat(e,"/contents"),method:"get"})}},ca97:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}]},[n("el-row",[n("el-col",[n("el-select",{attrs:{placeholder:"请选择仓库"},on:{change:t.selectRepos},model:{value:t.upForm.repos,callback:function(e){t.$set(t.upForm,"repos",e)},expression:"upForm.repos"}},t._l(t.reposList,(function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.name}})})),1),n("el-select",{attrs:{placeholder:"请选择目录"},model:{value:t.upForm.content,callback:function(e){t.$set(t.upForm,"content",e)},expression:"upForm.content"}},t._l(t.reposContents,(function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.val}})})),1),n("el-button",{on:{click:t.getList}},[t._v("获取列表")])],1)],1),n("el-row",{staticStyle:{"padding-top":"20px"}},[n("el-col",{staticClass:"imgerr"},[t._v(" 图片加载不出来？ "),n("el-button",{on:{click:function(e){t.isjsDeliver=!t.isjsDeliver}}},[t._v("切换外链接格式")])],1),n("el-col",t._l(t.dataList,(function(e,o){return n("div",{key:o,staticClass:"item"},[n("div",{staticClass:"del",on:{click:function(n){return t.delFile(e)}}},[n("i",{staticClass:"el-icon-delete"})]),n("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.isjsDeliver?t.imgurl+e.path:e.download_url,fit:"cover"}}),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.copy(1,t.imgurl+e.path)}}},[t._v("复制外链")]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.copy(2,t.imgurl+e.path)}}},[t._v("复制MD格式")])],1)})),0)],1)],1)},r=[],c=(n("99af"),n("4160"),n("b0c0"),n("159b"),n("c24f")),i=n("bb36");function s(t,e,n){return Object(i["a"])({url:"/repos/".concat(t,"/").concat(e,"/contents/").concat(n),method:"get"})}function a(t,e,n,o){return Object(i["a"])({url:"/repos/".concat(t,"/").concat(e,"/contents/").concat(n),method:"delete",data:o})}var u={data:function(){return{fullscreenLoading:!1,repoData:{},userInfo:{},reposList:[],reposContents:[],dataList:[],upForm:{repos:"",content:""},imgurl:"",isjsDeliver:!1}},created:function(){this.repoData=this.$store.state.uploadInfo,this.userInfo=this.$store.state.userInfo,this.defSelect()},methods:{defSelect:function(){this.getRepos(this.userInfo.login),this.selectRepos(this.$store.state.uploadInfo.repos),this.upForm.repos=this.$store.state.uploadInfo.repos,this.upForm.content=this.$store.state.uploadInfo.content,this.getList()},getRepos:function(t){var e=this;this.fullscreenLoading=!0,Object(c["c"])(t).then((function(t){e.reposList=t,e.fullscreenLoading=!1})).catch((function(t){console.log(t),e.fullscreenLoading=!1}))},selectRepos:function(t){var e=this;this.fullscreenLoading=!0,this.upForm.content="",Object(c["a"])(this.userInfo.login,t).then((function(t){var n=[];t.forEach((function(t){"dir"==t.type&&n.push({name:t.name,val:"/"+t.path})})),e.reposContents=n,e.fullscreenLoading=!1})).catch((function(t){console.log(t),e.fullscreenLoading=!1}))},getList:function(){var t=this;""!=this.upForm.repos&&""!=this.upForm.content?(this.fullscreenLoading=!0,this.imgurl="https://cdn.jsdelivr.net/gh/".concat(this.userInfo.login,"/").concat(this.upForm.repos,"/"),s(this.userInfo.login,this.upForm.repos,this.upForm.content).then((function(e){t.dataList=e,t.fullscreenLoading=!1})).catch((function(e){console.log(e),t.fullscreenLoading=!1}))):this.$message.info("请选择仓库和目录")},copy:function(t,e){var n="";n=1==t?e:"![wishimg](".concat(e,")");var o=document.createElement("input");o.value=n,document.body.appendChild(o),o.select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"}),o.remove()},delFile:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={message:"delete a file via wishimgurl",sha:t.sha};e.fullscreenLoading=!0,a(e.userInfo.login,e.upForm.repos,t.path,n).then((function(t){console.log(t),e.$message.success("删除成功"),e.getList(),e.fullscreenLoading=!1})).catch((function(t){console.log(t),e.fullscreenLoading=!1}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},l=u,f=(n("6427"),n("2877")),h=Object(f["a"])(l,o,r,!1,null,"a7f8d10c",null);e["default"]=h.exports},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-b35c90ec.c4577927.js.map